---
permalink: ubuntu/storage-and-performance-requirements.html 
sidebar: sidebar 
keywords: storage requirements, performance requirements, host storage, host volumes, netapp AFF, fabricpool 
summary: 初期設定と将来のストレージ拡張に対応できる十分なスペースを確保できるよう、 StorageGRID ノードのストレージ要件を把握しておく必要があります。 
---
= ストレージとパフォーマンスの要件
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
初期設定と将来のストレージ拡張に対応できる十分なスペースを確保できるよう、 StorageGRID ノードのストレージ要件を把握しておく必要があります。

StorageGRID ノードに必要なストレージは、 3 つの論理カテゴリに分類されます。

* * コンテナプール * - ノードコンテナ用のパフォーマンス階層（ 10K SAS または SSD ）のストレージ。 StorageGRID ノードをサポートするホストに Docker をインストールして設定するときに、 Docker ストレージドライバに割り当てられます。
* * システムデータ * -- システムデータとトランザクションログのノード単位の永続的ストレージ用のパフォーマンス階層（ 10K SAS または SSD ）ストレージ。 StorageGRID ホストサービスで個々のノードにマッピングされて使用されます。
* * オブジェクトデータ * -- オブジェクトデータとオブジェクトメタデータの永続的なストレージを実現するパフォーマンス階層（ 10K SAS または SSD ）のストレージと大容量階層（ NL-SAS / SATA ）のストレージ。


カテゴリに関係なく、いずれのストレージにも RAID ベースのブロックデバイスを使用する必要があります。非冗長ディスク、 SSD 、または JBOD はサポートされていません。いずれのカテゴリのストレージにも、共有またはローカルのどちらかの RAID ストレージを使用できます。ただし、 StorageGRID のノード移行機能を使用する場合は、システムデータとオブジェクトデータの両方を共有ストレージに格納する必要があります。



== パフォーマンス要件

コンテナプールのボリューム、システムデータのボリューム、およびオブジェクトメタデータのボリュームのパフォーマンスは、システム全体のパフォーマンスに大きく影響します。ボリュームのディスクパフォーマンスが、レイテンシ、 1 秒あたりの入出力操作（ IOPS ）、スループットの点で適切になるように、それらのボリュームにはパフォーマンス階層（ 10K SAS または SSD ）のストレージを使用します。オブジェクトデータの永続的なストレージには、大容量階層（ NL-SAS / SATA ）のストレージを使用できます。

コンテナプール、システムデータ、およびオブジェクトデータ用のボリュームでは、ライトバックキャッシュを有効にする必要があります。キャッシュは、保護されたメディアまたは永続的なメディアに配置する必要があります。



== NetApp ONTAP ストレージを使用するホストの要件

StorageGRID ノードがNetApp ONTAP システムから割り当てられたストレージを使用している場合は、ボリュームでFabricPool 階層化ポリシーが有効になっていないことを確認してください。StorageGRID ノードで使用するボリュームで FabricPool による階層化を無効にすることで、トラブルシューティングとストレージの処理がシンプルになります。


IMPORTANT: StorageGRID を使用して StorageGRID に関連するデータを FabricPool 自体に階層化しないでください。StorageGRID データを StorageGRID に階層化すると、トラブルシューティングと運用がより複雑になります。



== 必要なホストの数

各 StorageGRID サイトに、少なくとも 3 つのストレージノードが必要です。


IMPORTANT: 本番環境では、 1 つの物理ホストまたは仮想ホストで複数のストレージノードを実行しないでください。各ストレージノードに専用のホストを使用すると、分離された障害ドメインが提供されます。

管理ノードやゲートウェイノードなど、他のタイプのノードは、同じホストに導入するか、必要に応じて独自の専用ホストに導入することができます。



== 各ホストのストレージボリュームの数

次の表に、ホストに導入するノードの種類別に、各ホストに必要なストレージボリューム（ LUN ）の数と各 LUN に必要な最小サイズを示します。

テストで使用できる LUN の最大サイズは 39TB です。


NOTE: これらはホストごとの数値を示したものであり、グリッド全体の数値ではありません。

|===
| LUN の目的 | ストレージのカテゴリ | LUN の数 | LUN あたりの最小サイズ 


 a| 
コンテナエンジンのストレージプール
 a| 
コンテナプール
 a| 
1.
 a| 
ノードの総数 × 100GB



 a| 
/var/local ボリューム
 a| 
システムデータ
 a| 
このホストのノードごとに 1 個
 a| 
90GB



 a| 
ストレージノード
 a| 
オブジェクトデータ
 a| 
このホストのストレージノードごとに 3 個

* 注：ソフトウェアベースのストレージノードには 1~16 個のストレージボリュームを設定できます。 3 個以上のストレージボリュームを推奨します。
 a| 
12TB （ 4TB / LUN ）詳細については、ストレージノードのストレージ要件を参照してください。



 a| 
管理ノードの監査ログ
 a| 
システムデータ
 a| 
このホストの管理ノードごとに 1 個
 a| 
200GB



 a| 
管理ノードのテーブル
 a| 
システムデータ
 a| 
このホストの管理ノードごとに 1 個
 a| 
200GB

|===

IMPORTANT: 設定されている監査レベル、 S3 オブジェクトキー名などのユーザ入力のサイズ、保持する必要がある監査ログデータの量によっては、各管理ノードの監査ログ LUN のサイズを増やす必要があります。原則として、 S3 処理ごとに約 1 KB の監査データが生成されることから、 200GB の LUN で 1 日あたり 7 、 000 万件の処理、 1 秒あたり 2 ~ 3 日間で 800 件の処理がサポートされることになります。



== ホストの最小ストレージスペース

次の表に、各タイプのノードに必要な最小ストレージスペースを示します。この表を参照して、ホストに導入するノードの種類に応じて、ストレージカテゴリごとにホストで確保しなければならない最小ストレージ容量を決定できます。


NOTE: ディスクの Snapshot を使用してグリッドノードをリストアすることはできません。各タイプのノードのリカバリとメンテナンスの手順を参照してください。

|===
| ノードのタイプ | コンテナプール | システムデータ | オブジェクトデータ 


| ストレージノード  a| 
100 GB
 a| 
90GB
 a| 
4 、 000GB



 a| 
管理ノード
 a| 
100 GB
 a| 
490GB （ 3 個の LUN ）
 a| 
_ 該当なし _



 a| 
ゲートウェイノード
 a| 
100 GB
 a| 
90GB
 a| 
_ 該当なし _



 a| 
アーカイブノード
 a| 
100 GB
 a| 
90GB
 a| 
_ 該当なし _

|===


== 例：ホストのストレージ要件の計算

同じホストに 3 つのノードを導入することを計画しているとします。ストレージノードが 1 つ、管理ノードが 1 つ、ゲートウェイノードが 1 つです。ホストには少なくとも 9 個のストレージボリュームを用意する必要があります。ノードコンテナ用にパフォーマンス階層のストレージが 300GB 以上、システムデータとトランザクションログ用にパフォーマンス階層のストレージが 670GB 以上、オブジェクトデータ用に容量階層のストレージが 12TB 以上、それぞれ必要になります。

|===
| ノードのタイプ | LUN の目的 | LUN の数 | LUN サイズ 


| ストレージノード  a| 
Docker ストレージプール
 a| 
1.
 a| 
300GB （ 100GB/ ノード）



 a| 
ストレージノード
 a| 
/var/local ボリューム
 a| 
1.
 a| 
90GB



| ストレージノード  a| 
オブジェクトデータ
 a| 
3.
 a| 
12TB （ 4TB / LUN ）



 a| 
管理ノード
 a| 
/var/local ボリューム
 a| 
1.
 a| 
90GB



| 管理ノード  a| 
管理ノードの監査ログ
 a| 
1.
 a| 
200GB



| 管理ノード  a| 
管理ノードのテーブル
 a| 
1.
 a| 
200GB



 a| 
ゲートウェイノード
 a| 
/var/local ボリューム
 a| 
1.
 a| 
90GB



 a| 
* 合計 *
 a| 
 a| 
* 9 *
 a| 
* コンテナプール： * 300GB

* システムデータ： *670GB

* オブジェクトデータ： 12 、 000GB

|===


== ストレージノードのストレージ要件

ソフトウェアベースのストレージノードのストレージボリューム数は 1~16 個までにすることを推奨します。 -3 個以上のストレージボリュームを使用することを推奨します。各ストレージボリュームのサイズは 4TB 以上にします。


NOTE: アプライアンスストレージノードには、最大 48 個のストレージボリュームを設定できます。

図に示すように、 StorageGRID は各ストレージノードのストレージボリューム 0 にオブジェクトメタデータ用のスペースをリザーブします。ストレージボリューム 0 の残りのスペースとストレージノード内のその他のストレージボリュームは、オブジェクトデータ専用に使用されます。

image::../media/metadata_space_storage_node.png[Metadata Space ストレージノード]

冗長性を確保し、オブジェクトメタデータを損失から保護するために、 StorageGRID は各サイトのシステム内のすべてのオブジェクトにメタデータのコピーを 3 つずつ格納します。オブジェクトメタデータの 3 つのコピーが各サイトのすべてのストレージノードに均等に分散されます。

新しいストレージノードのボリューム 0 にスペースを割り当てる場合は、そのノードのすべてのオブジェクトメタデータの一部に対して十分なスペースを確保する必要があります。

* 少なくとも 4TB をボリューム 0 に割り当てる必要があります。
+

NOTE: ストレージノードでストレージボリュームを 1 つしか使用していない場合に、そのボリュームに 4TB 以下を割り当てると、ストレージノードが起動時にストレージ読み取り専用状態になり、オブジェクトメタデータのみが格納される可能性があります。

* 新規の StorageGRID 11.6 システムをインストールする場合、各ストレージノードに 128GB 以上の RAM がある場合は、ボリューム 0 に 8TB 以上を割り当てる必要があります。ボリューム 0 に大きな値を設定すると、各ストレージノードでメタデータに使用できるスペースが増加する可能性があります。
* サイトに複数のストレージノードを設定する場合は、可能であればボリューム 0 にも同じ設定を使用します。サイトにサイズが異なるストレージノードがある場合、ボリューム 0 が最も小さいストレージノードがそのサイトのメタデータ容量を決定します。


詳細については、を参照してください xref:../admin/managing-object-metadata-storage.adoc[オブジェクトメタデータストレージを管理する]。

xref:node-container-migration-requirements.adoc[ノードコンテナの移行要件]

xref:../maintain/index.adoc[リカバリとメンテナンス]
