---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: StorageGRID システム内のすべてのオブジェクトの配置、期間、データ保護を制御するには、情報ライフサイクル管理（ ILM ）を使用します。ILM ルールは、 StorageGRID が時間の経過に伴ってオブジェクトを格納する方法を決定します1 つ以上の ILM ルールを設定して ILM ポリシーに追加します。 
---
= 情報ライフサイクル管理を使用
:icons: font
:imagesdir: ../media/


[role="lead"]
情報ライフサイクル管理（ ILM ）を使用して、 StorageGRID システム内のすべてのオブジェクトの配置、期間、データ保護を制御します。ILM ルールは、 StorageGRID が時間の経過に伴ってオブジェクトを格納する方法を決定します1 つ以上の ILM ルールを設定して ILM ポリシーに追加します。

ILM ルールでは次の項目を定義

* 格納するオブジェクト。ルールはすべてのオブジェクトに適用することも、ルール環境 を構成するオブジェクトを特定するフィルタを指定することもできます。たとえば、特定のテナントアカウント、特定の S3 バケットまたは Swift コンテナ、または特定のメタデータ値に関連付けられたオブジェクトにのみルールを適用できます。
* ストレージのタイプと場所。オブジェクトは、ストレージノード、クラウドストレージプール、またはアーカイブノードに格納できます。
* 作成するオブジェクトコピーのタイプ。コピーはレプリケートまたはイレイジャーコーディングできます。
* レプリケートコピーの場合は、作成されるコピーの数。
* イレイジャーコーディングコピーにはイレイジャーコーディングスキームを使用します。
* オブジェクトのストレージの場所とコピーのタイプの経時的変化。
* オブジェクトがグリッドに取り込まれるときにオブジェクトデータを保護する方法（同期配置またはデュアルコミット）。


オブジェクトメタデータは ILM ルールによって管理されません。代わりに、オブジェクトメタデータはメタデータストア内の Cassandra データベースに格納されます。データを損失から保護するために、オブジェクトメタデータの 3 つのコピーが各サイトで自動的に維持されます。コピーはすべてのストレージノードに均等に分散されます。



== ILM ルールの例

次の ILM ルールの例では、テナント A に属するオブジェクトの環境 を設定しますこれらのオブジェクトのレプリケートコピーを 2 つ作成し、各コピーを別々のサイトに格納します。この 2 つのコピーは「無期限」に保持されます。つまり、 StorageGRID はこれらのコピーを自動的に削除しません。これらのオブジェクトは、クライアントの削除要求によって削除されるか、バケットライフサイクルが終了するまで、 StorageGRID によって保持されます。

このルールでは、取り込み動作に Balanced オプションが使用されます。 2 つのサイトの配置手順は、テナント A がオブジェクトを StorageGRID に保存するとすぐに適用されます。ただし、両方の必要なコピーをただちに作成することはできません。たとえば、テナント A がオブジェクトを保存したときにサイト 2 に到達できない場合、 StorageGRID はサイト 1 のストレージノードに 2 つの中間コピーを作成します。サイト 2 が使用可能になると、 StorageGRID はそのサイトで必要なコピーを作成します。

image::../media/ilm_example_rule_2_copies_tenant_a.png[例： ILM ルール 2 ではテナント A がコピーされます]



== ILM ポリシーによるオブジェクトの評価方法

StorageGRID システムのアクティブな ILM ポリシーは、すべてのオブジェクトの配置、期間、データ保護を制御します。

クライアントがオブジェクトを StorageGRID に保存すると、オブジェクトはアクティブポリシー内の順序付けられた ILM ルールに照らして次のように評価されます。

. ポリシー内の最初のルールのフィルタがオブジェクトに一致すると、オブジェクトはそのルールの取り込み動作に従って取り込まれ、そのルールの配置手順に従って格納されます。
. 最初のルールのフィルタがオブジェクトに一致しない場合、オブジェクトは一致が見つかるまでポリシー内の後続の各ルールに照らして評価されます。
. どのルールもオブジェクトに一致しない場合は、ポリシー内のデフォルトルールの取り込み動作と配置手順が適用されます。デフォルトルールはポリシー内の最後のルールであり、フィルタは使用できません。すべてのテナント、すべてのバケット、およびすべてのオブジェクトバージョンに適用する必要があります。




== ILM ポリシーの例

この例の ILM ポリシーは 3 つの ILM ルールを使用します。

image::../media/policy_for_two_tenants.png[2 テナントのポリシーの例]

この例では、ルール 1 はテナント A に属するすべてのオブジェクトに一致しますこれらのオブジェクトは、 3 つのサイトに 3 つのレプリケートコピーとして格納されます。他のテナントに属するオブジェクトはルール 1 に一致しないため、ルール 2 に照らして評価されます。

ルール 2 では、他のテナントのすべてのオブジェクトが一致しますが、 1MB より大きいオブジェクトのみが該当します。これらのオブジェクトは、 3 つのサイトで 6+3 のイレイジャーコーディングを使用して格納されます。ルール 2 がオブジェクト 1MB 以下に一致しないため、これらのオブジェクトはルール 3 に照らして評価されます。

ルール 3 はポリシー内の最後のルールで、デフォルトのルールであり、フィルタは使用しません。ルール 3 では、ルール 1 またはルール 2 に一致しないすべてのオブジェクトのレプリケートコピーを 2 つ作成します（ 1MB 以下のテナント A に属していないオブジェクト）。

image::../media/ilm_policy_and_rules.png[ILM のポリシーとルール]

* 関連情報 *

* xref:../ilm/index.adoc[ILM を使用してオブジェクトを管理する]

