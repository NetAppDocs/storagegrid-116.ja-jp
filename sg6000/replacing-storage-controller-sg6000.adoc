---
permalink: sg6000/replacing-storage-controller-sg6000.html 
sidebar: sidebar 
keywords: storagegrid, sg6000, storage node, storage appliance, Replacing, replace, storage controller, e2800, ef570, controller, remove, removing, removal, install, installing, installation 
summary: E2800 コントローラまたは EF570 コントローラが適切に機能しない場合や障害が発生した場合は、交換が必要となることがあります。 
---
= ストレージコントローラを交換します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
E2800 コントローラまたは EF570 コントローラが適切に機能しない場合や障害が発生した場合は、交換が必要となることがあります。

.必要なもの
* 交換するコントローラと同じパーツ番号の交換用コントローラを用意しておきます。
* コントローラに接続する各ケーブルを識別するためのラベルを用意しておきます。
* ESD リストバンドを装着するか、静電気防止処置を施しておきます。
* No.1 プラスドライバを用意しておきます。
* デュプレックス構成のコントローラを交換するための E シリーズの手順書を用意しておきます。
+

IMPORTANT: E シリーズの手順書は、指示された場合、または特定の手順の詳細を知る必要がある場合にのみ参照してください。StorageGRID アプライアンスのコントローラを交換する際は、 E シリーズの手順書を参考にしないでください。手順が異なります。

* データセンター内のコントローラを交換するストレージアプライアンスの物理的な場所を確認しておきます。
+
xref:locating-controller-in-data-center.adoc[データセンターでコントローラを探します]



コントローラに障害が発生したかどうかは、次の 2 つの方法で確認できます。

* SANtricity System Manager の Recovery Guru から、コントローラを交換するように指示されます。
* コントローラの黄色の警告 LED が点灯して、コントローラに障害が発生したことが通知されます。
+

IMPORTANT: シェルフ内の両方のコントローラの警告 LED が点灯している場合は、テクニカルサポートに連絡してください。



ストレージコントローラシェルフにはストレージコントローラが 2 台搭載されているため、次の条件を満たしていれば、アプライアンスの電源がオンで読み取り / 書き込み処理が行われている間に片方のコントローラを交換できます。

* シェルフのもう一方のコントローラのステータスが「最適」である。
* SANtricity System Manager の Recovery Guru の詳細領域にある「 ok to remove 」フィールドに「 Yes 」と表示され、このコンポーネントを安全に削除できることを示します。



IMPORTANT: 可能な場合は、この交換用手順 のアプライアンスをメンテナンスモードにして、予期しないエラーや障害が発生した場合の影響を最小限にしてください。


IMPORTANT: シェルフの 2 台目のコントローラキャニスターのステータスが「最適」でない場合や、 Recovery Guru にコントローラキャニスターを取り外すことができないことが示された場合は、テクニカルサポートにお問い合わせください。

コントローラを交換するときは、元のコントローラからバッテリを取り外し、交換用コントローラに取り付ける必要があります。場合によっては、元のコントローラからホストインターフェイスカードを取り外して、交換用コントローラに取り付ける必要があります。


NOTE: ほとんどのアプライアンスモデルのストレージコントローラには、ホストインターフェイスカード（ HIC ）は搭載されていません。

.手順
. 新しいコントローラを開封し、静電気防止処置を施した平らな場所に置きます。
+
梱包材は、障害が発生したコントローラを発送するときのために保管しておいてください。

. 交換用コントローラの背面にある MAC アドレスと FRU パーツ番号のラベルを確認します。
+
この図は E2800 コントローラを示しています。EF570 コントローラの交換手順 は同じです。

+
image::../media/e2800_labels_on_controller.gif[E2800 コントローラの MAC ラベルと FRU ラベル]

+
|===
| ラベル | ラベル | 説明 


 a| 
1.
 a| 
MAC アドレス
 a| 
管理ポート 1 （「 P1 」）の MAC アドレス。元のコントローラの IP アドレスが DHCP を使用して取得したアドレスである場合は、新しいコントローラに接続する際にこのアドレスが必要になります。



 a| 
2.
 a| 
FRU パーツ番号
 a| 
FRU パーツ番号。この番号は、現在取り付けられているコントローラの交換パーツ番号と一致している必要があります。

|===
. コントローラを取り外す準備をします。
+
これらの手順を実行するには、 SANtricity System Manager を使用します。詳細については、ストレージコントローラの交換に関する E シリーズの手順書を参照してください。

+
.. 障害が発生したコントローラの交換パーツ番号が交換用コントローラの FRU パーツ番号と同じであることを確認します。
+
コントローラに障害が発生しているため交換が必要な場合は、 Recovery Guru の詳細領域に交換パーツ番号が表示されます。この番号を手動で確認する必要がある場合は、コントローラの * Base * タブを参照してください。

+

IMPORTANT: * データアクセスが失われる可能性 -- * 2 つのパーツ番号が同じでない場合は、この手順 を試みないでください。

.. 構成データベースをバックアップします。
+
コントローラを取り外すときに問題が発生した場合は、保存したファイルを使用して構成をリストアできます。

.. アプライアンスのサポートデータを収集します。
+

NOTE: コンポーネントを交換する前後にサポートデータを収集しておけば、交換しても問題が解決しない場合に、テクニカルサポートにすべてのログを送信できます。

.. 交換するコントローラをオフラインにします。


. コントローラをアプライアンスから取り外します。
+
.. ESD リストバンドを装着するか、静電気防止処置を施します。
.. ケーブルにラベルを付け、ケーブルと SFP を外します。
+

IMPORTANT: パフォーマンスの低下を防ぐために、ケーブルをねじったり、折り曲げたり、はさんだり、踏みつけたりしないでください。

.. カムハンドルのラッチを押してコントローラをアプライアンスから外し、カムハンドルを右側に開きます。
.. 両手でカムハンドルをつかみ、コントローラをスライドしてアプライアンスから引き出します。
+

IMPORTANT: コントローラは重いので、必ず両手で支えながら作業してください。

.. 取り外し可能なカバーを上にして、静電気防止処置を施した平らな場所にコントローラを置きます。
.. カバーをボタンを押し下げながらスライドして取り外します。


. 障害が発生したコントローラからバッテリを取り外し、交換用コントローラに取り付けます。
+
.. コントローラ内部（バッテリと DIMM の間）の緑の LED が消灯していることを確認します。
+
この緑の LED が点灯している場合は、コントローラがまだバッテリ電源を使用しています。この LED が消灯するのを待ってから、コンポーネントを取り外す必要があります。

+
image::../media/e2800_internal_cache_active_led.gif[E2800 の緑色の LED]

+
|===
| 項目 | 説明 


 a| 
1.
 a| 
内部キャッシュアクティブ LED



 a| 
2.
 a| 
バッテリー

|===
.. バッテリの青色のリリースラッチの位置を確認します。
.. バッテリをリリースラッチを押し下げながら引き出し、コントローラから外します。
+
image::../media/e2800_remove_battery.gif[バッテリのラッチ]

+
|===
| 項目 | 説明 


 a| 
1.
 a| 
バッテリのリリースラッチ



 a| 
2.
 a| 
バッテリー

|===
.. バッテリを持ち上げながらスライドし、コントローラから引き出します。
.. 交換用コントローラのカバーを取り外します。
.. バッテリのスロットが手前になるよう交換用コントローラの向きを変えます。
.. バッテリを少し下に傾けながらコントローラに挿入します。
+
バッテリ前部の金属製のフランジをコントローラ下部のスロットに挿入し、バッテリの上部がコントローラの左側にある小さな位置決めピンの下にくるまでスライドする必要があります。

.. バッテリラッチを上に動かしてバッテリを固定します。
+
カチッという音がしてラッチが固定されると、ラッチの下部がシャーシの金属製のスロットに収まります。

.. コントローラを裏返し、バッテリが正しく取り付けられていることを確認します。
+

IMPORTANT: * ハードウェアの破損の可能性 * - バッテリ前部の金属製のフランジがコントローラのスロットにしっかりと挿入されている必要があります（ 1 つ目の図）。バッテリが正しく取り付けられていないと（ 2 つ目の図）、金属製のフランジがコントローラボードに接触し、破損の原因となる可能性があります。

+
*** * 正解 -- バッテリの金属製のフランジがコントローラのスロットに完全に挿入されています *
+
image::../media/e2800_battery_flange_ok.gif[バッテリのフランジが正常な状態]

*** * 不正解 -- バッテリの金属製のフランジがコントローラのスロットに挿入されていません *
+
image::../media/e2800_battery_flange_not_ok.gif[バッテリのフランジが正しくない状態]



.. コントローラカバーを取り付けます。


. 交換用コントローラをアプライアンスに取り付けます。
+
.. 取り外し可能なカバーが下になるようにコントローラを裏返します。
.. カムハンドルを開いた状態でコントローラをスライドし、アプライアンスに最後まで挿入します。
.. カムハンドルを左側に動かして、コントローラを所定の位置にロックします。
.. ケーブルと SFP を交換します。
.. 元のコントローラの IP アドレスが DHCP を使用して取得したアドレスである場合は、交換用コントローラの背面のラベルに記載された MAC アドレスを確認します。取り外したコントローラの DNS / ネットワークおよび IP アドレスを交換用コントローラの MAC アドレスと関連付けるよう、ネットワーク管理者に依頼します。
+

NOTE: 元のコントローラの IP アドレスが DHCP を使用して取得したアドレスでなければ、取り外したコントローラの IP アドレスが新しいコントローラで使用されます。



. SANtricity System Manager を使用して、コントローラをオンラインにします。
+
.. 「 * ハードウェア * 」を選択します。
.. 図にドライブが表示されている場合は、 * シェルフの背面を表示 * を選択します。
.. オンラインに切り替えるコントローラを選択します。
.. コンテキストメニューから * オンラインに配置 * を選択し、操作を確定します。
.. デジタル表示ディスプレイに「 99 」の状態が表示されていることを確認します。


. 新しいコントローラのステータスが「 Optimal 」であることを確認し、サポートデータを収集します。


http://mysupport.netapp.com/info/web/ECMP1658252.html["NetApp E シリーズシステムのドキュメントのサイト"^]
