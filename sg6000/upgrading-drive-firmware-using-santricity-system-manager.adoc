---
permalink: sg6000/upgrading-drive-firmware-using-santricity-system-manager.html 
sidebar: sidebar 
keywords: storagegrid, sg6000, storage node, storage appliance, upgrade, upgrading, firmware, drive, disk, SANtricity System Manager, SANtricity 
summary: ドライブファームウェアをアップグレードして、最新の機能とバグ修正をすべて適用します。 
---
= SANtricity System Manager を使用してドライブファームウェアをアップグレードします
:icons: font
:imagesdir: ../media/


[role="lead"]
ドライブファームウェアをアップグレードして、最新の機能とバグ修正をすべて適用します。

.必要なもの
* ストレージアプライアンスのステータスが「最適」であることを確認します。
* すべてのドライブのステータスが最適な状態である必要があります
* 最新バージョンの SANtricity System Manager がインストールされていて、 StorageGRID のバージョンと互換性があることを確認します。
* これで完了です xref:placing-appliance-into-maintenance-mode.adoc[StorageGRID アプライアンスをメンテナンスモードにしました]。
+

NOTE: 保守モードでは、ストレージコントローラへの接続が中断され、すべての I/O アクティビティが停止されて、すべてのドライブがオフラインになります。

+

IMPORTANT: 一度に複数の StorageGRID アプライアンスでドライブファームウェアをアップグレードしないでください。お使いの導入モデルや ILM ポリシーによっては、原因 データを使用できなくなる場合があります。



.手順
. 次のいずれかの方法で SANtricity System Manager にアクセスします。
+
** StorageGRID アプライアンス・インストーラを使用して、 * アドバンスト * > * SANtricity システム・マネージャ * を選択します
** SANtricity システム・マネージャを使用するには、ストレージ・コントローラ IP ： +`* https://_Storage_Controller_IP_*` にアクセスします


. 必要に応じて、 SANtricity System Manager 管理者のユーザ名とパスワードを入力します。
. ストレージアプライアンスに現在インストールされているドライブファームウェアのバージョンを確認します。
+
.. SANtricity システムマネージャで、 * support * > * Upgrade Center * を選択します。
.. ドライブファームウェアのアップグレードで、 * アップグレードの開始 * を選択します。
+
ドライブファームウェアのアップグレードに、現在インストールされているドライブファームウェアファイルが表示されます。

.. 現在のドライブファームウェア列に表示されているドライブファームウェアのリビジョンとドライブ ID をメモします。
+
image::../media/storagegrid_update_drive_firmware.png[ドライブファームウェアをアップグレードします]

+
次の例では、

+
*** ドライブファームウェアのリビジョンは * MS02 * です。
*** ドライブ識別子は *KPM51VUG800G* です。


+
Associated Drives 列で「 * View drives 」を選択して、ストレージアプライアンス内のドライブがどこに取り付けられているかを表示します。

.. ドライブファームウェアのアップグレードウィンドウを閉じます。


. 使用可能なドライブファームウェアのアップグレードをダウンロードして準備します。
+
.. ドライブファームウェアのアップグレードで、 * ネットアップサポート * を選択します。
.. ネットアップサポート Web サイトで、「 * Downloads * 」タブを選択し、「 * E-Series Disk Drive Firmware * 」を選択します。
+
E-Series Disk Firmware ページが表示されます。

.. ストレージアプライアンスにインストールされているドライブ識別子 * をそれぞれ検索し、各ドライブ識別子に最新のファームウェアリビジョンが適用されていることを確認します。
+
*** ファームウェアリビジョンがリンクでない場合、このドライブ識別子には最新のファームウェアリビジョンが含まれます。
*** ドライブ識別子が記載されたドライブのパーツ番号が 1 つ以上であれば、それらのドライブでファームウェアのアップグレードを実行できます。任意のリンクを選択してファームウェアファイルをダウンロードできます。
+
image::../media/storagegrid_drive_firmware_download.png[E シリーズディスクファームウェアのページです]



.. 新しいファームウェアリビジョンがリストされている場合は、ファームウェアリビジョンのリンクを選択します( ダウンロード ) 列をクリックして ' ファームウェア・ファイルを含む .zip アーカイブをダウンロードします
.. サポートサイトからダウンロードしたドライブファームウェアのアーカイブファイルを展開（解凍）します。


. ドライブファームウェアのアップグレードをインストールします。
+
.. SANtricity システムマネージャのドライブファームウェアアップグレードで、 * アップグレードの開始 * を選択します。
.. [* Browse] を選択し、サポートサイトからダウンロードした新しいドライブファームウェアファイルを選択します。
+
ドライブファームウェアファイルのファイル名は、 +`D_HCUC101212CSS600_30602291_MS01_2800_0002.dll' のようになります。

+
ドライブファームウェアファイルは一度に 1 つずつ、最大 4 つまで選択できます。同じドライブに複数のドライブファームウェアファイルが対応している場合は、ファイル競合エラーが発生します。アップグレードに使用するドライブファームウェアファイルを決定し、それ以外のファイルは削除します。

.. 「 * 次へ * 」を選択します。
+
* ドライブの選択 * には、選択したファームウェアファイルでアップグレードできるドライブがリストされています。

+
対応しているドライブのみが表示されます。

+
選択したドライブのファームウェアが * 推奨ファームウェア * に表示されます。このファームウェアを変更する必要がある場合は、 * 戻る * を選択します。

.. 「オフライン（パラレル） * アップグレード」を選択します。
+
オフラインアップグレード方式を使用できるのは、アプライアンスがメンテナンスモードで、すべてのドライブとすべてのボリュームの I/O アクティビティが停止されているためです。

+

CAUTION: アプライアンスが確実にメンテナンスモードになっていないかぎり、次の手順に進まないでください。オフラインのドライブファームウェア更新を開始する前にアプライアンスをメンテナンスモードに切り替えると、原因 のデータが失われる可能性があります。

.. テーブルの最初の列で、アップグレードするドライブを選択します。
+
ベストプラクティスとして、同じモデルのドライブをすべて同じファームウェアリビジョンにアップグレードすることを推奨します。

.. [ スタート ] ボタンをクリックし、アップグレードを実行することを確認します。
+
アップグレードを停止する必要がある場合は、 * 停止 * を選択します。実行中のファームウェアのダウンロードは完了します。開始されていないファームウェアのダウンロードはキャンセルされます。

+

IMPORTANT: ドライブファームウェアのアップグレードを停止すると、データが失われたり、ドライブを使用できなくなったりする可能性があります。

.. （オプション）アップグレードされた内容のリストを表示するには、 * ログを保存 * を選択します。
+
ログ・ファイルは ' ブラウザの Downloads フォルダに 'latest-upgrade-log-timestamp.txt という名前で保存されます

+
手順のアップグレード中に次のいずれかのエラーが発生した場合は、推奨される対処方法を実行してください。

+
*** * 割り当て済みドライブの障害 *
+
エラーの理由の 1 つとして、ドライブに適切な署名がない可能性があります。該当するドライブが認定済みのドライブであることを確認します。詳細については、テクニカルサポートにお問い合わせください。

+
ドライブを交換する場合は、交換用ドライブの容量が交換する障害ドライブと同じかそれよりも大きいことを確認してください。

+
障害が発生したドライブの交換は、ストレージアレイで I/O を受信中に実行できます

*** * ストレージアレイを確認してください *
+
**** 各コントローラに IP アドレスが割り当てられていることを確認します。
**** コントローラに接続されているすべてのケーブルが破損していないことを確認します。
**** すべてのケーブルがしっかりと接続されていることを確認します。


*** * 内蔵ホットスペアドライブ *
+
ファームウェアをアップグレードする前に、このエラーを修正する必要があります。

*** * 不完全なボリュームグループ *
+
1 つ以上のボリュームグループまたはディスクプールが不完全な場合は、ファームウェアをアップグレードする前に、このエラーを修正する必要があります。

*** * すべてのボリュームグループで実行中の排他的な処理（バックグラウンドメディア / パリティスキャン以外） *
+
1 つ以上の排他的な処理を実行中の場合は、その処理を完了してからファームウェアをアップグレードする必要があります。System Manager で処理の進捗状況を監視します。

*** * 見つからないボリューム *
+
ファームウェアをアップグレードする前に、ボリュームが見つからない状態を修正する必要があります。

*** * いずれかのコントローラが最適以外の状態 *
+
いずれかのストレージアレイコントローラを確認する必要があります。ファームウェアをアップグレードする前に、この状態を修正する必要があります。

*** * コントローラオブジェクトグラフ間でストレージパーティション情報が一致しません *
+
コントローラ上のデータの検証中にエラーが発生しました。この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * SPM によるデータベースコントローラの検証が失敗します *
+
コントローラでストレージパーティションマッピングデータベースのエラーが発生しました。この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * 構成データベースの検証（ストレージアレイのコントローラのバージョンでサポートされている場合） *
+
コントローラで構成データベースのエラーが発生しました。この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * MEL 関連のチェック *
+
この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * 過去 7 日間に 10 個を超える DDE 情報または重大 MEL イベントが報告されました *
+
この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * 過去 7 日間に 2 ページ 2C 重大 MEL イベントが報告されました *
+
この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * 過去 7 日間に 2 個以上の低下したドライブチャネル重大 MEL イベントが報告されました *
+
この問題を解決するには、テクニカルサポートにお問い合わせください。

*** * 過去 7 日間に 4 個を超える重大 MEL エントリがあります *
+
この問題を解決するには、テクニカルサポートにお問い合わせください。





. この手順 が正常に完了し、ノードを保守モードにしている間に実行する追加の手順がある場合は、すぐに実行します。処理が完了した場合、または何らかの障害が発生して最初からやり直したい場合は、 * Advanced * > * Reboot Controller * を選択し、次のいずれかのオプションを選択します。
+
** [Reboot into StorageGRID （の再起動） ] を選択します
** メンテナンスモードを維持したままコントローラをリブートするには、 * Reboot into Maintenance Mode * を選択します。手順 で障害が発生したために最初からやり直す場合は、このオプションを選択します。ノードのリブートが完了したら、障害が発生した手順 の該当する手順から再起動します。
+
image::../media/reboot_controller_from_maintenance_mode.png[コントローラをメンテナンスモードでリブートします]

+
アプライアンスがリブートしてグリッドに再参加するまでに最大 20 分かかることがあります。リブートが完了し、ノードが再びグリッドに参加したことを確認するには、 Grid Manager に戻ります。アプライアンスノードの Nodes ページに、アラートがアクティブでノードがグリッドに接続されていないことを示す正常なステータス（ノード名の左側にアイコンが表示されない）が表示されます。



+
image::../media/node_rejoin_grid_confirmation.png[アプライアンスノードがグリッドに再参加しました]



xref:upgrading-santricity-os-on-storage-controllers.adoc[ストレージコントローラの SANtricity OS をアップグレードします]
