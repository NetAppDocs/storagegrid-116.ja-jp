---
permalink: ilm/data-protection-options-for-ingest.html 
sidebar: sidebar 
keywords: ingest options, balanced ingest, strict ingest, dual-commit ingest 
summary: ILM ルールを作成する際には、取り込み時にオブジェクトを保護するためのオプションとして、 Dual commit 、 Balanced 、または Strict のいずれかを指定します。選択したオプションに応じて、 StorageGRID は、中間コピーを作成してオブジェクトをキューに登録し、あとで ILM 評価を実行するか、または同期配置を使用してコピーをただちに作成して ILM 要件を満たします。 
---
= 取り込みのデータ保護オプション
:icons: font
:imagesdir: ../media/


[role="lead"]
ILM ルールを作成する際には、取り込み時にオブジェクトを保護するためのオプションとして、 Dual commit 、 Balanced 、または Strict のいずれかを指定します。選択したオプションに応じて、 StorageGRID は、中間コピーを作成してオブジェクトをキューに登録し、あとで ILM 評価を実行するか、または同期配置を使用してコピーをただちに作成して ILM 要件を満たします。



== 3 つの取り込みオプションのフローチャート

次のフローチャートは、 3 つの取り込みオプションのそれぞれを使用する ILM ルールにオブジェクトが一致した場合の動作を示しています。

image::../media/ingest_object_lifecycle.png[各データ保護オプションでのオブジェクトの取り込み方法を示す図]



== デュアルコミット

Dual commit オプションを選択すると、 StorageGRID は 2 つの異なるストレージノード上に中間オブジェクトコピーをただちに作成し、「 ingest successful 」メッセージをクライアントに返します。オブジェクトは ILM 評価のキューに登録され、ルールの配置手順を満たすコピーはあとで作成されます。



=== Dual commit オプションを使用する状況

次のいずれかの場合に Dual commit オプションを使用します。

* マルチサイトの ILM ルールを使用しており、クライアントの取り込みレイテンシを考慮する必要があります。Dual commit を使用する場合は、 ILM を満たしていないデュアルコミットコピーの作成と削除の作業をグリッドで確実に実行できるようにする必要があります。具体的には、
+
** ILM のバックログが発生しないように、グリッドの負荷が十分に低い必要があります。
** グリッドにハードウェアリソース（ IOPS 、 CPU 、メモリ、ネットワーク帯域幅など）が余剰である。


* マルチサイトの ILM ルールを使用していて、通常はサイト間の WAN 接続のレイテンシが高くなっているか、帯域幅が制限されている。このシナリオでは、 Dual commit オプションを使用するとクライアントのタイムアウトを回避できます。Dual commit オプションを選択する前に、現実的なワークロードでクライアントアプリケーションをテストする必要があります。




== strict

Strict オプションを選択すると、 StorageGRID は取り込み時に同期配置を使用してルールの配置手順で指定されたすべてのオブジェクトコピーをただちに作成します。必要なストレージの場所が一時的に使用できないなどの理由で、 StorageGRID がすべてのコピーを作成できない場合は、取り込みが失敗します。クライアントは処理を再試行する必要があります。



=== Strict オプションを使用する場合

Strict オプションは、 ILM ルールに指定された場所にのみオブジェクトをただちに格納するための運用または規制上の要件がある場合に使用してください。たとえば、規制要件を満たすために、 Strict オプションと Location Constraint 高度なフィルタを使用して、オブジェクトが特定のデータセンターに格納されないようにする必要があります。

xref:example-5-ilm-rules-and-policy-for-strict-ingest-behavior.adoc[例 5 ：取り込み動作が Strict の場合の ILM ルールとポリシー]



== 中間（ Balanced ）

Balanced オプションを選択した場合も、 StorageGRID は、取り込み時に同期配置を使用してルールの配置手順で指定されたすべてのコピーをただちに作成します。Strict オプションと違い、 StorageGRID がすべてのコピーをただちに作成できない場合は、代わりに Dual commit を使用します。



=== Balanced オプションを使用する状況

Balanced オプションは、データ保護、グリッドパフォーマンス、および取り込みの成功の最適な組み合わせを実現するために使用します。Balanced は、 ILM ルールウィザードのデフォルトオプションです。
