---
permalink: ilm/c2s-s3-authentication-details-for-cloud-storage-pool.html 
sidebar: sidebar 
keywords: cloud storage pool with C2S, commercial cloud services, c2s access portal 
summary: Commercial クラウド サービス \ （ C2S \ ） S3 サービスをクラウドストレージプールとして使用するには、認証タイプとして C2S Access Portal \ （ CAP \ ）を設定し、 StorageGRID が C2S アカウント内の S3 バケットにアクセスするための一時的なクレデンシャルを要求できるようにする必要があります。 
---
= C2S S3 ：クラウドストレージプールの認証情報を指定します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Commercial クラウド サービス （ C2S ） S3 サービスをクラウドストレージプールとして使用するには、認証タイプとして C2S Access Portal （ CAP ）を設定し、 StorageGRID が C2S アカウント内の S3 バケットにアクセスするための一時的なクレデンシャルを要求できるようにする必要があります。

.必要なもの
* Amazon S3 クラウドストレージプールのサービスエンドポイントを含む基本情報を入力しておきます。
* StorageGRID が CAP サーバから一時的なクレデンシャルを取得するために使用する、 C2S アカウントに割り当てられている必須 / オプションの API パラメータをすべて含む完全な URL が必要です。
* 該当する公的認証局（ CA ）が発行したサーバ CA 証明書が必要です。StorageGRID は、この証明書を使用して CAP サーバの識別情報を確認します。サーバ CA 証明書は PEM エンコードを使用している必要があります。
* 該当する公的認証局（ CA ）が発行したクライアント証明書が必要です。StorageGRID は、この証明書を使用して CAP サーバに対して自身を識別します。クライアント証明書は PEM エンコードを使用し、 C2S アカウントへのアクセスが許可されている必要があります。
* クライアント証明書の PEM でエンコードされた秘密鍵が必要です。
* クライアント証明書の秘密鍵が暗号化されている場合は、復号化用のパスフレーズが必要です。


.手順
. [* 認証 *] セクションで、 [* 認証タイプ *] ドロップダウンから *CAP (C2S Access Portal)* を選択します。
+
CAP C2S の認証フィールドが表示されます。

+
image::../media/cloud_storage_pool_create_c2s.png[クラウドストレージプールの作成： C2S]

. 次の情報を入力します。
+
.. [*Temporary Credentials URL] には、 StorageGRID が CAP サーバから一時的なクレデンシャルを取得するために使用する完全な URL を入力します。これには、 C2S アカウントに割り当てられている必須およびオプションの API パラメータがすべて含まれます。
.. Server CA Certificate* には、 * Select New* を選択し、 StorageGRID が CAP サーバの検証に使用する PEM でエンコードされた CA 証明書をアップロードします。
.. * クライアント証明書 * の場合は、 * 新しい * を選択し、 StorageGRID が CAP サーバに対して自身を識別するために使用する PEM でエンコードされた証明書をアップロードします。
.. * クライアント秘密鍵 * の場合は、 * 新規選択 * を選択し、クライアント証明書の PEM でエンコードされた秘密鍵をアップロードします。
+
秘密鍵が暗号化されている場合は、従来の形式を使用する必要があります。（ PKCS #8 で暗号化された形式はサポートされていません）。

.. クライアントの秘密鍵が暗号化されている場合は、クライアントの秘密鍵を復号化するためのパスフレーズを入力します。それ以外の場合は、 [* クライアント秘密キーのパスフレーズ * ] フィールドを空白のままにします。


. Server Verification セクションで、次の情報を指定します。
+
.. 「 * 証明書の検証 * 」で、「 * カスタム CA 証明書を使用する * 」を選択します。
.. Select New * を選択し、 PEM でエンコードされた CA 証明書をアップロードします。


. [ 保存（ Save ） ] を選択します。


クラウドストレージプールを保存すると、 StorageGRID では次の処理が実行されます。

* バケットとサービスエンドポイントが存在し、指定したクレデンシャルを使用してそれらにアクセスできることを検証します。
* バケットをクラウドストレージプールとして識別するために、バケットにマーカーファイルを書き込みます。このファイルは削除しないでください。「 x-ntap-sgws-cloud-pool-uuid 」という名前です。


クラウドストレージプールの検証に失敗すると、その理由を記載したエラーメッセージが表示されます。たとえば、証明書エラーが発生した場合や、指定したバケットが存在しない場合などにエラーが報告されます。

image::../media/cloud_storage_pool_create_error.gif[クラウドストレージプールの作成エラー]

の手順を参照してください xref:troubleshooting-cloud-storage-pools.adoc[クラウドストレージプールのトラブルシューティング]をクリックし、問題 を解決してから、クラウドストレージプールの保存を再度実行してください。
