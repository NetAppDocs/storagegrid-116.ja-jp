---
permalink: ilm/managing-objects-with-s3-object-lock.html 
sidebar: sidebar 
keywords: s3 object lock, manage objects with object lock 
summary: グリッド管理者は、 StorageGRID システムで S3 オブジェクトロックを有効にし、準拠 ILM ポリシーを実装して、特定の S3 バケット内のオブジェクトが指定した期間にわたって削除または上書きされないようにすることができます。 
---
= S3 オブジェクトロックでオブジェクトを管理します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
グリッド管理者は、 StorageGRID システムで S3 オブジェクトロックを有効にし、準拠 ILM ポリシーを実装して、特定の S3 バケット内のオブジェクトが指定した期間にわたって削除または上書きされないようにすることができます。



== S3 オブジェクトのロックとは何ですか？

StorageGRID S3 オブジェクトロック機能は、 Amazon Simple Storage Service （ Amazon S3 ）での S3 オブジェクトロックに相当するオブジェクト保護解決策 です。

図に示すように、 StorageGRID システムでグローバルな S3 オブジェクトのロック設定が有効になっている場合、 S3 テナントアカウントでは、 S3 オブジェクトのロックを有効にしているかどうかに関係なくバケットを作成できます。バケットで S3 オブジェクトのロックが有効になっている場合、 S3 クライアントアプリケーションは、そのバケット内の任意のオブジェクトバージョンの保持設定を必要に応じて指定できます。オブジェクトのバージョンには、 S3 オブジェクトロックで保護するように指定された保持設定が必要です。また、 S3 オブジェクトのロックが有効になっている各バケットでは、必要に応じてデフォルトの保持モードと保持期間を使用できます。この期間は、オブジェクトを独自の保持設定なしでバケットに追加した場合に適用されます。

image::../media/s3_object_lock_architecture.png[S3 オブジェクトロックアーキテクチャ]

StorageGRID S3 オブジェクトロック機能は、 Amazon S3 準拠モードと同等の単一の保持モードを提供します。デフォルトでは、保護されたオブジェクトバージョンは、どのユーザーでも上書きまたは削除できません。StorageGRID S3 オブジェクトのロック機能では、ガバナンスモードはサポートされず、特別な権限を持つユーザは保持設定を省略したり保護されたオブジェクトを削除したりすることはできません。

バケットで S3 オブジェクトロックが有効になっている場合、 S3 クライアントアプリケーションは、オブジェクトの作成時または更新時に、次のオブジェクトレベルの保持設定のいずれか、または両方を必要に応じて指定できます。

* *Retain Until - date* ：オブジェクトバージョンの retain-until - date が将来の日付である場合、オブジェクトは読み出し可能ですが、変更または削除することはできません。必要に応じて、オブジェクトの retain-date を増やすことはできますが、この日付を減らすことはできません。
* * リーガルホールド * ：オブジェクトバージョンにリーガルホールドを適用すると、そのオブジェクトがただちにロックされます。たとえば、調査または法的紛争に関連するオブジェクトにリーガルホールドを設定する必要がある場合があります。リーガルホールドには有効期限はありませんが、明示的に削除されるまで保持されます。リーガルホールドは、それまでの保持期間とは関係ありません。


オブジェクトの保持設定の詳細については、を参照してください xref:../s3/using-s3-object-lock.adoc[S3 オブジェクトロックを使用する]。

デフォルトのバケット保持設定の詳細については、を参照してください xref:../s3/use-s3-object-lock-default-bucket-retention.adoc[S3 オブジェクトロックのデフォルトバケット保持を使用する]。



== S3 オブジェクトロックと従来の準拠の比較

S3 オブジェクトロックは、以前のバージョンの StorageGRID で使用されていた準拠機能に代わる機能です。S3 オブジェクトロック機能は Amazon S3 の要件に準拠しているため、「従来のコンプライアンス」と呼ばれる独自の StorageGRID 準拠機能は廃止されています。

グローバル準拠設定を有効にしていた場合は、グローバルな S3 オブジェクトのロック設定が自動的に有効になります。テナントユーザは、準拠を有効にした新しいバケットを作成できなくなりました。ただし必要に応じて、テナントユーザは引き続き既存の従来の準拠バケットを使用および管理できます。これには次のタスクの実行が含まれます。

* 従来の準拠が有効になっている既存のバケットに新しいオブジェクトを取り込む。
* 従来の準拠が有効になっている既存のバケットの保持期間を延長する。
* 従来の準拠が有効になっている既存のバケットの自動削除設定を変更する。
* 従来の準拠が有効になっている既存のバケットにリーガルホールドを適用する。
* リーガルホールドを解除する。


を参照してください https://["ネットアップのナレッジベース： StorageGRID 11.5 でレガシー準拠バケットを管理する方法"^] 手順については、を参照し

以前のバージョンの StorageGRID で従来の準拠機能を使用していた場合、次の表を参照して、 StorageGRID の S3 オブジェクトロック機能と比較する方法を確認してください。

[cols="1a,1a,1a"]
|===
|  | S3 オブジェクトロック（新規） | コンプライアンス（レガシー） 


 a| 
この機能はグローバルにどのように有効になりますか。
 a| 
Grid Manager から * configuration * > * System * > * S3 Object Lock * を選択します。
 a| 
サポートは終了しました。

* 注：以前のバージョンの StorageGRID を使用してグローバル準拠設定を有効にした場合、 StorageGRID 11.6 で S3 オブジェクトロック設定が有効になります。既存の準拠バケットの設定の管理には引き続き StorageGRID を使用できますが、新しい準拠バケットを作成することはできません。



 a| 
バケットで機能を有効にするにはどうすればよいですか？
 a| 
Tenant Manager 、テナント管理 API 、または S3 REST API を使用して新しいバケットを作成するときは、 S3 オブジェクトロックを有効にする必要があります。
 a| 
準拠を有効にした新しいバケットを作成することはできなくなりました。ただし、既存の準拠バケットには引き続き新しいオブジェクトを追加できます。



 a| 
バケットのバージョン管理はサポートされているか
 a| 
はい。バケットのバージョン管理は必須であり、バケットで S3 オブジェクトのロックが有効になっている場合は自動的に有効になります。
 a| 
いいえ従来の準拠機能では、バケットのバージョン管理は許可されていません。



 a| 
オブジェクト保持はどのように設定されますか。
 a| 
ユーザーは、オブジェクトバージョンごとに retain-until date を設定できます。
 a| 
ユーザはバケット全体の保持期間を設定する必要があります。保持期間を指定すると、バケット内のすべてのオブジェクトが環境 で保持されます。



 a| 
バケットには保持とリーガルホールドのデフォルト設定を適用できるか。
 a| 
はい。S3 オブジェクトのロックが有効になっている StorageGRID バケットでは、取り込み時に独自の保持設定が指定されていないオブジェクトバージョンにデフォルトの保持期間を適用できます。
 a| 
はい。



 a| 
保持期間は変更できますか。
 a| 
オブジェクトバージョンの retain-until は、上げることはできますが、減らすことはできません。
 a| 
バケットの保持期間は、増やすことはできますが、減らすことはできません。



 a| 
リーガルホールドはどこで制御されますか？
 a| 
バケット内のオブジェクトバージョンにリーガルホールドを適用したり、リーガルホールドを解除したりできます。
 a| 
リーガルホールドはバケットに適用され、バケット内のすべてのオブジェクトに適用されます。



 a| 
オブジェクトを削除できるのはいつですか。
 a| 
オブジェクトがリーガルホールドの対象でない場合は、 retain-until 日に達したあとでオブジェクトバージョンを削除できます。
 a| 
バケットがリーガルホールドの対象でない場合は、保持期間が過ぎたあとにオブジェクトを削除できます。オブジェクトは自動または手動で削除できます。



 a| 
バケットライフサイクル設定はサポートされていますか。
 a| 
はい。
 a| 
いいえ

|===