---
permalink: ilm/deactivating-erasure-coding-profile.html 
sidebar: sidebar 
keywords: deactivate ec profile, remove erasure coding profile 
summary: 使用する予定がなくなったイレイジャーコーディングプロファイルや、プロファイルが現在どの ILM ルールでも使用されていないプロファイルは、非アクティブ化できます。 
---
= イレイジャーコーディングプロファイルを非アクティブ化します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
使用する予定がなくなったイレイジャーコーディングプロファイルや、プロファイルが現在どの ILM ルールでも使用されていないプロファイルは、非アクティブ化できます。

.必要なもの
* を使用して Grid Manager にサインインします xref:../admin/web-browser-requirements.adoc[サポートされている Web ブラウザ]。
* 特定のアクセス権限が必要です。
* イレイジャーコーディングされたデータ修復処理または運用停止手順が実行中でないことを確認しておきます。いずれかの処理の実行中にイレイジャーコーディングプロファイルを非アクティブ化しようとすると、エラーメッセージが返されます。


.このタスクについて
イレイジャーコーディングプロファイルを非アクティブ化しても、プロファイルはイレイジャーコーディングのプロファイルページに表示されますが、ステータスは * deactivated* になります。

image::../media/deactivated_ec_profile.png[非活動化された EC プロファイル]

非アクティブ化されたイレイジャーコーディングプロファイルは使用できなくなります。非アクティブ化したプロファイルは、 ILM ルールの配置手順の作成時に表示されません。非アクティブ化したプロファイルは再アクティブ化できません。

StorageGRID では、次のいずれかに該当する場合はイレイジャーコーディングプロファイルを非アクティブ化できません。

* イレイジャーコーディングプロファイルは現在 ILM ルールで使用されています。
* ILM ルールではイレイジャーコーディングプロファイルが使用されなくなりましたが、プロファイルのオブジェクトデータとパリティのフラグメントはまだ存在します。


.手順
. ILM * > * イレイジャーコーディング * を選択します。
+
イレイジャーコーディングのプロファイルページが表示されます。[ 名前の変更 * （ Rename * ） ] ボタンと [ 非活動化 * （ Deactivate * ） ] ボタンの両方が無効

. ステータス * 列を確認して、非アクティブ化するイレイジャーコーディングプロファイルが ILM ルールで使用されていないことを確認します。
+
ILM ルールで使用されているイレイジャーコーディングプロファイルは非アクティブ化できません。この例では、少なくとも 1 つの ILM ルールで * 2_1 EC プロファイル * が使用されています。

+
image::../media/ec_profile_used_in_ilm_rule.png[ILM ルールで使用されている EC プロファイル]

. プロファイルが ILM ルールで使用されている場合は、次の手順を実行します。
+
.. [* ILM*>* Rules] を選択します。
.. 表示されているルールごとに、オプションボタンを選択し、保持図を確認して、非アクティブ化するイレイジャーコーディングプロファイルがルールで使用されているかどうかを判断します。
+
この例では、「 3 サイト EC for larger objects 」ルールで、「 * All 3 Sites * 」というストレージプールと「 * all sites 6+3 * イレイジャーコーディングプロファイル」を使用しています。イレイジャーコーディングプロファイルは次のアイコンで表されます。 image:../media/icon_nms_erasure_coded.gif["EC プロファイルアイコン"]

+
image::../media/ilm_rule_ec_profile_used.png[使用された ILM ルール EC プロファイル]

.. 非アクティブ化するイレイジャーコーディングプロファイルを ILM ルールが使用している場合は、そのルールがアクティブな ILM ポリシーとドラフトポリシーのどちらで使用されているかを確認します。
+
この例では、アクティブな ILM ポリシーで大容量オブジェクト * ルール用の * 3 サイト EC が使用されています。

.. イレイジャーコーディングプロファイルの使用場所に基づいて、表に記載された追加の手順を実行します。
+
[cols="2a,3a,1a"]
|===
| プロファイルはどこで使用されていますか？ | プロファイルを非アクティブ化する前に実行する追加手順 | 追加の手順を参照してください 


 a| 
ILM ルールでは使用されません
 a| 
追加の手順は必要ありません。この手順に進みます。
 a| 
_ なし _



 a| 
ILM ポリシーで使用されたことのない ILM ルール
 a| 
... 該当する ILM ルールをすべて編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用するすべての配置を削除します。
... この手順に進みます。

 a| 
xref:working-with-ilm-rules-and-ilm-policies.adoc[ILM ルールおよび ILM ポリシーの操作]



 a| 
アクティブな ILM ポリシーに現在含まれている ILM ルール
 a| 
... アクティブポリシーのクローンを作成します。
... イレイジャーコーディングプロファイルを使用する ILM ルールを削除します。
... オブジェクトを確実に保護するために、新しい ILM ルールを 1 つ以上追加します。
... 新しいポリシーを保存、シミュレート、およびアクティブ化します。
... 新しいポリシーが適用され、追加した新しいルールに基づいて既存のオブジェクトが新しい場所に移動されるまで待ちます。
+
* 注： StorageGRID システムのオブジェクト数とサイズによっては、新しい ILM ルールに基づいてオブジェクトを新しい場所に移動するのに数週間から数カ月かかる場合があります。

+
データに関連付けられたままイレイジャーコーディングプロファイルを安全に非アクティブ化しようとしても、非アクティブ化処理は失敗します。プロファイルを非アクティブ化する準備ができていない場合は、エラーメッセージが表示されます。

... ポリシーから削除したルールを編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用するすべての配置を削除します。
... この手順に進みます。

 a| 
*** xref:creating-ilm-policy.adoc[ILM ポリシーを作成する]
*** xref:working-with-ilm-rules-and-ilm-policies.adoc[ILM ルールおよび ILM ポリシーの操作]




 a| 
ドラフトの ILM ポリシーに現在含まれている ILM ルール
 a| 
... ドラフトポリシーを編集します。
... イレイジャーコーディングプロファイルを使用する ILM ルールを削除します。
... すべてのオブジェクトが保護されるように 1 つ以上の新しい ILM ルールを追加します。
... ドラフトポリシーを保存します。
... ポリシーから削除したルールを編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用するすべての配置を削除します。
... この手順に進みます。

 a| 
*** xref:creating-ilm-policy.adoc[ILM ポリシーを作成する]
*** xref:working-with-ilm-rules-and-ilm-policies.adoc[ILM ルールおよび ILM ポリシーの操作]




 a| 
ILM 履歴ポリシー内の ILM ルール
 a| 
... ルールを編集または削除します。ルールを編集する場合は、イレイジャーコーディングプロファイルを使用するすべての配置を削除します。（このルールは履歴ポリシーに履歴ルールとして表示されます）。
... この手順に進みます。

 a| 
xref:working-with-ilm-rules-and-ilm-policies.adoc[ILM ルールおよび ILM ポリシーの操作]

|===
.. プロファイルが ILM ルールで使用されていないことを確認するには、イレイジャーコーディングのプロファイルページをリフレッシュしてください。


. プロファイルが ILM ルールで使用されていない場合は、ラジオボタンを選択し、 * Deactivate * を選択します。
+
[EC プロファイルを非活動化（ Deactivate EC Profile ） ] ダイアログボックスが表示

+
image::../media/deactivate_ec_profile_confirmation.png[EC プロファイルの確認を無効にします]

. プロファイルを非活動化してもよい場合は、 [ * 非活動化 * （ * Deactivate * ） ] を選択します。
+
** StorageGRID でイレイジャーコーディングプロファイルを非アクティブ化できる場合、ステータスは * deactivated* になります。これで、どの ILM ルールにもこのプロファイルを選択できなくなりました。
** StorageGRID がプロファイルを非アクティブ化できない場合は、エラー・メッセージが表示されます。たとえば、オブジェクトデータがまだこのプロファイルに関連付けられている場合は、エラーメッセージが表示されます。無効化プロセスを再度実行する前に、数週間待つ必要がある場合があります。



