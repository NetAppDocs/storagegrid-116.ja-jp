---
permalink: sg100-1000/checking-dns-server-configuration.html 
sidebar: sidebar 
keywords: storagegrid, sg100, sg1000, service appliance, services appliance, gateway Node, admin node, domain name system, DNS, server, servers, check, checking, change, changing, modify, modifying, modification 
summary: このアプライアンスノードで現在使用されているドメインネームシステム（ DNS\ ）サーバを確認し、一時的に変更できます。 
---
= DNS サーバの設定を確認します
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
このアプライアンスノードで現在使用されているドメインネームシステム（ DNS ）サーバを確認し、一時的に変更することができます。

.必要なもの
* これで完了です xref:placing-appliance-into-maintenance-mode.adoc[アプライアンスをメンテナンスモードにしました]。


.このタスクについて
KMS のホスト名は IP アドレスではなくドメイン名として指定されているため、暗号化されたアプライアンスがキー管理サーバ（ KMS ）または KMS クラスタに接続できない場合は、 DNS サーバ設定の変更が必要になることがあります。アプライアンスの DNS 設定に加えた変更は一時的なものであり、メンテナンスモードを終了すると失われます。これらの変更を永続的に行うには、 Grid Manager で DNS サーバを指定します（ * maintenance * > * Network * > * DNS servers * ）。

* DNS 設定の一時的な変更が必要になるのは、ホスト名に IP アドレスではなく完全修飾ドメイン名を使用して KMS サーバが定義されているノード暗号化アプライアンスのみです。
* ノード暗号化アプライアンスをドメイン名を使用して KMS に接続する場合は、グリッド用に定義されている DNS サーバの 1 つに接続する必要があります。これらの DNS サーバの 1 つが、ドメイン名を IP アドレスに変換します。
* ノードがグリッドの DNS サーバにアクセスできない場合、またはノード暗号化アプライアンスノードがオフラインのときにグリッド全体の DNS 設定を変更した場合は、ノードは KMS に接続できません。アプライアンス上の暗号化されたデータは、 DNS 問題 が解決されるまで復号化できません。


KMS 接続を回避する DNS 問題 を解決するには、 StorageGRID アプライアンスインストーラで 1 つ以上の DNS サーバの IP アドレスを指定します。この一時的な DNS 設定により、アプライアンスは KMS に接続してノード上のデータを復号化することができます。

たとえば、暗号化されたノードがオフラインのときにグリッドの DNS サーバが変更された場合、ノードは以前の DNS 値をまだ使用しているため、オンラインに戻った時点で KMS にアクセスできなくなります。StorageGRID アプライアンスインストーラで新しい DNS サーバの IP アドレスを入力すると、 KMS 接続を使用してノードのデータを復号化できます。

.手順
. StorageGRID アプライアンスインストーラから、 *Configure Networking *>*DNS Configuration* を選択します。
. 指定した DNS サーバが正しいことを確認してください。
+
image::../media/dns_configuration.png[DNS の設定]

. 必要に応じて、 DNS サーバを変更します。
+

IMPORTANT: DNS 設定に対する変更は一時的なものであり、メンテナンスモードを終了すると失われます。

. 一時的な DNS 設定に問題がなければ、 * 保存 * を選択します。
+
ノードは、このページで指定されている DNS サーバ設定を使用して KMS に再接続し、ノード上のデータを復号化できるようにします。

. ノードデータが復号化されたら、ノードをリブートします。StorageGRID アプライアンス・インストーラから、 *Advanced*>*Reboot Controller* を選択し、次のいずれかのオプションを選択します。
+
** Reboot into StorageGRID * を選択し、ノードをグリッドに再追加してコントローラをリブートします。メンテナンスモードで作業を完了し、ノードを通常動作に戻す準備ができている場合は、このオプションを選択します。
** メンテナンスモードを維持したままコントローラをリブートするには、 * Reboot into Maintenance Mode * を選択します。（このオプションは、コントローラがメンテナンスモードのときにのみ使用できます）。 このオプションは、グリッドに再追加する前にノードで追加のメンテナンス処理を実行する必要がある場合に選択します。
+
image::../media/reboot_controller_from_maintenance_mode.png[コントローラをメンテナンスモードでリブートします]

+

NOTE: ノードがリブートしてグリッドに再び参加すると、 Grid Manager にリストされているシステム全体の DNS サーバが使用されます。グリッドに再追加したあとは、アプライアンスがメンテナンスモードのときに、 StorageGRID アプライアンスインストーラで指定された一時的な DNS サーバがアプライアンスで使用されなくなります。

+
アプライアンスがリブートしてグリッドに再参加するまでに最大 20 分かかることがあります。リブートが完了し、ノードが再びグリッドに参加したことを確認するには、 Grid Manager に戻ります。ノード * ページには、アクティブなアラートがなくノードがグリッドに接続されていることを示すために、アプライアンスノードの通常ステータス（アイコンなし）が表示されます。

+
image::../media/nodes_menu.png[アプライアンスノードがグリッドに再参加しました]




